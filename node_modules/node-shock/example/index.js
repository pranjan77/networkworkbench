
var SHOCK = require('../lib');
var fs = require('fs');

var url = 'http://140.221.84.236:8000/node';
var un = 'gpuser';
var ps = 'bescdemo';
var file = __dirname + '/test1';
var id = null;

/*
var afile = __dirname + '/test1.attrib';

var attributes = {};
attributes.abc = 'val1';
attributes.pqr = 'val2';

var fd = fs.openSync(afile, 'w', 0666);
fs.writeSync(fd, JSON.stringify(attributes) );
fs.closeSync(fd);

var shock = new SHOCK( url, un, ps, file, afile );
*/

var sendFile = function() {

	var shock = new SHOCK( url, un, ps, file);
	shock.addAttributesSync( 'guru', 'ranjan');
	shock.sendFile(function(err, result) {
		if (err) {
			console.log(err);
		} else {
			//console.log('Uploaded File');
			//console.dir(result);
			//console.dir(result.data);
			id = result.data.id;
			console.log(id);
			console.log('End -----------------------');

		}
	});
};

var getAttrib = function() {
	var shock2 = new SHOCK( url, un, ps );
	var id = 'ca21bfff-a8f2-4d32-932f-4b50e8c561b6';
	//var id = 'c7dd3459-552b-4b8f-bcc1-f95104426635';
	shock2.getAttributes(id, function(error, attrib) {
		if (error) {
			console.dir(error);
		} else {
			console.dir(attrib);
		}

	});
};

var getFile = function() {
	var shock3 = new SHOCK( url, un, ps );
	var id = 'c7dd3459-552b-4b8f-bcc1-f95104426635';
	shock3.getFile(id, function(error, file) {
		if (error) {
			console.dir(error);
		} else {
			console.dir(file);
		}
	});
};

var getIds = function() {
	var shock4 = new SHOCK( url, un, ps );
	shock4.query('guru', 'ranjan', function(error, data) {
		if (error) {
			console.dir(error);
		} else {
			console.dir(data);
		}
	});
};

//setTimeout( sendFile, 600 );
setTimeout( getAttrib, 1000 );
//setTimeout( getIds, 1000 );
//setTimeout( getFile, 1000 );
